imports:
- integration/testdata/e2e/simple-http-test/suite.yaml
- integration/testdata/e2e/mongo-test/suite.yaml
apps:
- name: bosun
  branching:
    master: master
    develop: master
    release: ""
    feature: issue/{{.Number}}/{{.Slug}}
  repo: naveego/bosun
  version: 1.7.0
  images: []
  scripts:
  - name: publish
    steps:
    - bosun: [""]
      cmd: |-
        set -e
        if [[ -n "$(git status --porcelain)" ]] ; then
          echo "directory is dirty"
          exit 1
        fi
        git tag $(bosun app version bosun)
        git push --tags
        goreleaser --rm-dist
  actions:
  - name: TestManualHTTPTest
    description: Test for manual actions.
    when: Manual
    test:
      http: https://google.com
  - name: ManualMongo
    description: Test for manual mongo insert action.
    when: Manual
    mongo:
      connection:
        dbName: bosun-test
        host: ""
        port: ""
        kubePort:
          forward: true
          serviceName: mongodb-0
          port: 27017
          namespace: ""
        credentials:
          type: vault
          vaultPath: database/creds/mongodb-provisioner
          authSource: admin
      databaseFile: test/mongo/db.yaml
      rebuildDb: false
repos:
- name: bosun
  labels: {}
- name: bosun
  labels: {}
